Ext.ns("Ynzc");
Ext.ns("Ynzc.manage");
Ynzc.manage.UniteHarvesterCancleInfoGridUpdateWin=Ext.extend(Ext.Window,{
                id:'uniteHarvesterCancleInfoGridUpdateWin',
                initComponent:function(){
                    Ext.apply(this,{
                    	id:'uniteHarvesterCancleInfoGridUpdateWin',
			            title:"联合收割机注销登记",
			            iconCls:'icon-Add',
			            resizable:false,
			            modal:true,
			            height:380,
			            width:750,
			            items:[{
			            	xtype:'tabpanel',
			                border:false,
			                frame:true,
			                activeTab:0,
			                items:[{
			                	title:'所有人信息', 
			                    frame:true,
			                    bodyStyle:"padding:5px 5px",
			                    autoScroll:true,
			                    height:345,
			                    layout:'column',
			                    items:[{
			                    	columnWidth:.5,
			                    	layout:'form',
			                    	labelWidth:75,
			                    	items:[{
			                    		id:'harvesterOwner',
			                    		xtype:"textfield",
			                    		fieldLabel:'姓名/名称',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'liveAddress',
			                    		xtype:"textfield",
			                    		fieldLabel:'住所地址',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'tempAddress',
			                    		xtype:"textfield",
			                    		fieldLabel:'暂住地址',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'certitype',
			                    		xtype:"combo",
			                    		fieldLabel:'证件类型',          		
			                   		    displayField : 'realcertificatetype',
						                valueField : 'id',
						                typeAhead : true,
						                mode : 'remote',
						                editable : false,
						                selectOnFoucs : true,
						                triggerAction : 'all',
						                store:Ynzc.manage.Certificate,
			                    		anchor:'98%'
			                    	},{
			                    		id:'liveType',
			                    		xtype:"combo",
			                    		readOnly:true,
			                    		fieldLabel:'居住类型',
			                   		    displayField : 'display',
						                valueField : 'value',
						                typeAhead : true,
						                mode : 'local',
						                editable : false,
						                selectOnFoucs : true,
						                triggerAction : 'all',
						                store:Ynzc.manage.IsTempLiveData,
			                    		anchor:'98%'
			                    	}]
			                    },{
			                    	columnWidth:.5,
			                    	layout:'form',
			                    	labelWidth:75,
			                    	items:[{
			                    		id:'telephoneNum',
			                    		xtype:"textfield",
			                    		fieldLabel:'联系电话',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'livePostCode',
			                    		xtype:"textfield",
			                    		fieldLabel:'邮政编码',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'tempPostCode',
			                    		xtype:"textfield",
			                    		fieldLabel:'邮政编码',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'certiCode',
			                    		xtype:"textfield",
			                    		fieldLabel:'证件号码',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'liveCode',
			                    		xtype:"textfield",
			                    		readOnly:true,
			                    		fieldLabel:'居住号码',
			                    		anchor:'98%'
			                    	}]
			                    }]
			                },{
			                	title:'联合收割机',
			                    frame:true,
			                    bodyStyle:"padding:5px 5px",
			                    autoScroll:true,
			                    height:375,
			                    layout:'column',
			                    items:[{
                            		columnWidth:1,
                            		layout:'fit',
                            		items:[{
                            			xtype:'fieldset',
                            			title:'获得方式',
                            			layout:'column',
                            			collapsible:true,
                    					autoHeight:true,
                    					items:[{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'goumai',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'购买'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'zhongjiang',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'中奖'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'jicheng',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'继承'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'zengyu',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'赠予'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'xieyidichang',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'协议抵偿债务'
                    						}]
                    					},{
                    						columnWidth:1
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'zichanchongzu',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'资产重组'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'zhengtimaimai',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'资产整体买卖'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'diaobo',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'调拨'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'fayuan',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'法院调解/裁定/判决'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'zhongcai',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'仲裁裁决'
                    						}]
                    					},{
                    						columnWidth:1
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'qita',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'其他'
                    						}]
                    					}]
                            		}]
                            	},{
			                    	columnWidth:.5,
			                    	layout:'form',
			                    	labelWidth:105,
			                    	items:[{
			                    		id:'harvesterCode',
			                    		xtype:"textfield",
			                    		readOnly:true,
			                    		fieldLabel:'收割机车牌号码',
			                    		anchor:'98%'
			                    	},{
			                    		id:'harvesterQuality',
			                    		xtype:"textfield",
			                    		fieldLabel:'总质量',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'harvesterBodyCode',
			                    		xtype:"textfield",
			                    		readOnly:true,
			                    		fieldLabel:'机身号码',
			                    		anchor:'98%'
			                    	},{
			                    		id:'harvesterEngineCode',
			                    		xtype:"textfield",
			                    		fieldLabel:'发动机号码',
			                    		readOnly:true,
			                    		anchor:'98%'
			                    	},{
			                    		id:'harvesterType',
			                    		fieldLabel:'收割机类型',
			                    		xtype:"combo",
			                   		    displayField : 'display',
						                valueField : 'id',
						                typeAhead : true,
						                mode : 'local',
						                editable : false,
						                selectOnFoucs : true,
						                triggerAction : 'all',
						                store:Ynzc.manage.uniteHarvestType,
			                    		anchor:'98%'
			                    	}]
			                    },{
			                    	columnWidth:.5,
			                    	layout:'form',
			                    	labelWidth:75,
			                    	items:[{
			                    		id:'unitRegion',
			                    		xtype:"textfield",
			                    		readOnly:true,
			                    		fieldLabel:'管辖地',
			                    		anchor:'98%'
			                    	},{
			                    		id:'caraddress',
			                    		xtype:"uncombo",
			                    		readOnly:true,
			                    		fieldLabel:'车辆地址',
			                    		anchor:'98%'
			                    	},{
			                    		id:'harvesterChangPaiType',
			                    		xtype:"textfield",
			                    		readOnly:true,
			                    		fieldLabel:'厂牌型号',
			                    		anchor:'98%'
			                    	},{
			                    		id:'harvesterSitNum',
			                    		xtype:"textfield",
			                    		readOnly:true,
			                    		fieldLabel:'驾驶室人数',
			                    		anchor:'98%'
			                    	},{
			                    		id:'harvesterBodyColor',
			                    		xtype:"textfield",
			                    		readOnly:true,
			                    		fieldLabel:'机身颜色',
			                    		anchor:'98%'
			                    	}]
			                    }]
			                },{
			                	title:'相关资料',
			                	frame:true,
			                    bodyStyle:"padding:5px 5px",
			                    autoScroll:true,
			                    height:375,
			                	layout:'column',
			                	items:[{
                            		columnWidth:1,
                            		layout:'fit',
                            		items:[{
                            			xtype:'fieldset',
                            			title:'来历证明',
                            			layout:'column',
                            			collapsible:true,
                    					autoHeight:true,
                    					items:[{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'xiaoshoujiaoyi',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'销售/交易发票'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'tiaojieshu',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'调解书'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'caidingshu',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'裁定书'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'panjueshi',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'判决书'
                    						}]
                    					},{
                    						columnWidth:1
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'xiangguanwenshu',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'相关文书'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'pizhunwenjian',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'批准文件'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'diaobozhengming',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'调拨证明'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                    							disabled:true,
                        						disabledClass:"checkCss",
                        						id:'zhongcaicaijueshu',
                        						boxLabel:'仲裁裁决书'
                    						}]
                    					}]
                            		},{
                            			xtype:'fieldset',
                            			title:'进口凭证',
                            			layout:'column',
                            			collapsible:true,
                    					autoHeight:true,
                    					items:[{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'huowujinkou',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'货物进口证明书'
                    						}]
                    					},{
                    						columnWidth:.2,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'moshouzousi',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'没收走私农机证明书'
                    						}]
                    					},{
                    						columnWidth:.6,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'china',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'中华人民共和国海关监管农机进（出）境领（销）牌证通知书'
                    						}]
                    					}]
                            		},{
                            			xtype:'fieldset',
                            			title:'其他',
                            			layout:'column',
                            			collapsible:true,
                    					autoHeight:true,
                    					items:[{
                    						columnWidth:.3,
                    						items:[{
                    							xtype:'checkbox',
                        						id:'guochannongji',
                        						disabled:true,
                        						disabledClass:"checkCss",
                        						boxLabel:'国产农机的整车出厂合格证'
                    						}]
                    					},{
                    						columnWidth:.175,
                    						items:[{
                    							xtype:'checkbox',
                    							disabled:true,
                        						disabledClass:"checkCss",
                        						id:'nongjidangan',
                        						boxLabel:'农机档案'
                    						}]
                    					},{
                    						columnWidth:.175,
                    						items:[{
                    							xtype:'checkbox',
                    							disabled:true,
                        						disabledClass:"checkCss",
                        						id:'shenfenzhengming',
                        						boxLabel:'身份证明'
                    						}]
                    					},{
                    						columnWidth:.175,
                    						items:[{
                    							xtype:'checkbox',
                    							disabled:true,
                        						disabledClass:"checkCss",
                        						id:'xieyizhixing',
                        						boxLabel:'协助执行通知书'
                    						}]
                    					},{
                    						columnWidth:.175,
                    						items:[{
                    							xtype:'checkbox',
                    							disabled:true,
                        						disabledClass:"checkCss",
                        						id:'gongzhengshu',
                        						boxLabel:'公证书'
                    						}]
                    					},{
                    						columnWidth:1
                    					}]
                            		}]
			                	}]
			                },{
			                	title:'注销事项',
			                	frame:true,
			                    bodyStyle:"padding:5px 5px",
			                    autoScroll:true,
			                    height:375,
			                	layout:'column',
			                	items:[{
			                		columnWidth:1,
			                		xtype:'fieldset',
                        			title:'注销内容',
                        			layout:'column',
                        			collapsible:true,
                					autoHeight:true,
                					items:[{
                						columnWidth:.33,
                						items:[{
                							xtype:'checkbox',
                    						id:'haopai', 						
                    						boxLabel:'号牌'
                						}]
                					},{
                						columnWidth:.33,
                						items:[{
                							xtype:'checkbox',
                    						id:'xingshizheng',	
                    						boxLabel:'行驶证'
                						}]				
                					},{
                						columnWidth:.34,
                						items:[{
                							id:'baofeinongjihuishouzheng',
                    						xtype:'checkbox',
                    						boxLabel:'报废农机回收证明副本'
                						}]
                					},{
                						columnWidth:1
                					}]
			                	},{
			                		columnWidth:1
			                	},{
			                		columnWidth:1,
			                		xtype:'fieldset',
                        			title:'注销原因',
                        			layout:'column',
                        			collapsible:true,
                					autoHeight:true,
                					items:[{
                						columnWidth:.33,
                						items:[{
                							xtype:'radio',
    		                				id:'baofei',
    		                				name:'cancleWhy',
    		                				checked:true,
    		                				boxLabel:'报废'
                						}]
		                			},{
		                				columnWidth:.33,
                						items:[{
                							xtype:'radio',
    		                				id:'diushi',
    		                				name:'cancleWhy',
    		                				boxLabel:'丢失'
                						}]
		                			},{
		                				columnWidth:.34,
                						items:[{
                							xtype:'radio',
    		                				id:'qita',
    		                				name:'cancleWhy',
    		                				boxLabel:'其他'
                						}]
		                			}]
			                	},{
			                		columnWidth:1
			                	},{
			                		columnWidth:1,
			                		layout:'form',
			                		labelWidth:60,
			                		items:[{
			                			id:'canclenote',
			                			xtype:'textarea',
			                			anchor:'98%',
			                			fieldLabel:'备注'
			                		}]
            					}]
			                },{
			                	title:'经办情况',
			                	frame:true,
			                    bodyStyle:"padding:5px 5px",
			                    autoScroll:true,
			                    height:375,
			                	layout:'column',
			                	items:[{
			                		columnWidth:.22
			                	},{
			                		columnWidth:.6,
			                		layout:'form',
			                		labelWidth:65,
			                		items:[{
			                			id:'applicationType',
			                    		fieldLabel:'申请方式',
			                    		xtype:"combo",
			                   		    displayField : 'display',
						                valueField : 'id',
						                typeAhead : true,
						                mode : 'local',
						                editable : false,
						                selectOnFoucs : true,
						                triggerAction : 'all',
						                store:Ynzc.manage.ApplicationDataType,
			                    		anchor:'98%'
			                		},{
			                			id:'jinbandate',
			                			readOnly:true,
			                			xtype:'datefield',
			                			format:"Y-m-d",
			                			fieldLabel:'经办时间',
			                			anchor:'98%'
			                		},{
			                			id:'jinbanMan',
			                			xtype:'textfield',
			                			fieldLabel:'经办人',
			                			anchor:'98%'
			                		}]
			                	},{
			                		columnWidth:.18
			                	}]
			                }],
			                 listeners:{
		            	     "tabchange":function(tab,panel){
		            			  panel.doLayout();
		            		  }
			                }
			            }],
			            buttons:[{
			            	id:'save',
			            	text:'保存',
			            	handler:function(){
			            		if(Ynzc.manage.UniteHarvestState==1){
    								{Ext.ux.Toast.msg("操作提示","该车已经被注销了，不能进行保存本次操作！");return};
    							}
			            		var cancleContent="";
			            		if(Ext.getCmp("haopai").checked){cancleContent+="1,"}else{cancleContent+="0,"}
			            		if(Ext.getCmp("xingshizheng").checked){cancleContent+="1,"}else{cancleContent+="0,"}
			            		if(Ext.getCmp("baofeinongjihuishouzheng").checked){cancleContent+="1,"}else{cancleContent+="0,"}
			            		if(cancleContent=="0,0,0,"){Ext.ux.Toast.msg("操作提示","[<font color=red>注销事项</font>][<font color=red>注销内容</font>]没有选择，请选择。");return}
			            		var cancleWhy=0;
			            		if(Ext.getCmp("baofei").checked){cancleWhy=0;}
			            		if(Ext.getCmp("diushi").checked){cancleWhy=1;}
			            		if(Ext.getCmp("qita").checked){cancleWhy=2;}
			            		if(Ext.getCmp("applicationType").getValue()===""){Ext.ux.Toast.msg("操作提示","[<font color=red>经办情况</font>][<font color=red>申请方式</font>]为空，请填写。");return}
			            		if(Ext.getCmp("jinbandate").getValue()==""){Ext.ux.Toast.msg("操作提示","[<font color=red>经办情况</font>][<font color=red>经办时间</font>]为空，请填写。");return}
			            		if(Ext.getCmp("jinbanMan").getValue()==""){Ext.ux.Toast.msg("操作提示","[<font color=red>经办情况</font>][<font color=red>经办人</font>]为空，请填写。");return}
			            		Ext.Ajax.request({
			            			url:'main/uniteharvesterCancleInfo.html?action=updateUniteharvesterCancle',
			            			success:function(res){
			            				var result=Ext.util.JSON.decode(res.responseText);
			            				if(result.success==true){
			            					Ext.ux.Toast.msg("操作提示",result.reason);
				            				Ext.getCmp("uiteHarvesterCancle").getStore().reload();
				            				Ext.getCmp("uniteHarvesterCancleInfoGridUpdateWin").close();
			            				}else{
			            					Ext.ux.Toast.msg("操作提示",result.reason);
			            				}
			            			},
			            			params:{
			            				cancledateContent:cancleContent,
			            				cancleWhyType:cancleWhy,
			            				cancleApplicationtype:Ext.getCmp("applicationType").getValue(),
			            				cancleRegisterman:Ext.getCmp("jinbanMan").getValue(),
			            				cancleRegistdate:Ext.util.Format.date(Ext.getCmp("jinbandate").getValue(),'Y-m-d'),
			            				cancleNote:Ext.getCmp("canclenote").getValue(),
			            				id:Ynzc.manage.uniteHarvestcancleId,
			            				harvesterId:Ynzc.manage.cancleuniteHarvestId
			            			}
			            		});
			            	}
			            },{
			            	id:'cancle',
			            	text:'取消',
			            	handler:function(){
			            		Ext.getCmp("uniteHarvesterCancleInfoGridUpdateWin").close();
			            	}
			            }]
                });
                 Ynzc.manage.UniteHarvesterCancleInfoGridUpdateWin.superclass.initComponent.apply(this,arguments);
                }
});